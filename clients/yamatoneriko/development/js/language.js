// Language translations
const translations = {
    ja: {
        // Header
        logo: "yamatoneriko",
        nav: {
            about: "ABOUT",
            service: "SERVICE", 
            works: "WORKS",
            contact: "CONTACT"
        },
        
        // Hero section
        hero: {
            tagline: "あなたの世界観、まるごとカタチにします。",
            subtitle: "「届けたい想い」が伝わるデザインを。",
            description: "イラストからWeb、グッズまで一貫制作",
            cta: "まずは相談してみる"
        },
        
        // Problems section
        problems: {
            title: "こんなお悩みありませんか？",
            subtitle: "クリエイティブな課題を、一緒に解決しましょう"
        },
        
        // Features section (Why choose yamatoneriko)
        features: {
            title: "yamatonerikoが選ばれる理由",
            subtitle: "創造性と戦略性を兼ね備えた、トータルクリエイティブサポート",
            item1: {
                title: "イラスト制作",
                description: "キャラクターから背景まで、世界観に合わせたイラストを制作"
            },
            item2: {
                title: "デザイン制作",
                description: "ロゴ、名刺、チラシなど、ブランディングに必要なデザイン全般"
            },
            item3: {
                title: "Web制作",
                description: "LP、HP制作から運用まで。集客につながるWebサイトを"
            },
            item4: {
                title: "グッズ制作",
                description: "アクリルキーホルダーからTシャツまで、オリジナルグッズの企画・制作"
            }
        },
        
        // Works section
        works: {
            title: "WORKS",
            subtitle: "制作実績",
            viewMore: "もっと見る"
        },
        
        // Contact section
        contact: {
            title: "CONTACT",
            subtitle: "お問い合わせ",
            description: "制作のご依頼・ご相談はお気軽に",
            form: {
                name: "お名前",
                email: "メールアドレス", 
                subject: "件名",
                message: "お問い合わせ内容",
                submit: "送信する"
            }
        },
        
        // Footer
        footer: {
            copyright: "© 2025 yamatoneriko All Rights Reserved.",
            links: {
                about: "運営者情報",
                terms: "利用規約",
                privacy: "プライバシーポリシー",
                law: "特定商取引法に基づく表記"
            }
        }
    },
    
    en: {
        // Header
        logo: "yamatoneriko",
        nav: {
            about: "ABOUT",
            service: "SERVICE",
            works: "WORKS", 
            contact: "CONTACT"
        },
        
        // Hero section
        hero: {
            tagline: "Bringing Your Entire Worldview to Life",
            subtitle: "Design that Conveys What You Want to Deliver",
            description: "Comprehensive creation from illustrations to web and merchandise",
            cta: "Get Started with a Consultation"
        },
        
        // Problems section
        problems: {
            title: "Do You Have These Concerns?",
            subtitle: "Let's solve your creative challenges together"
        },
        
        // Features section (Why choose yamatoneriko)
        features: {
            title: "Why Choose yamatoneriko",
            subtitle: "Total creative support combining creativity and strategy",
            item1: {
                title: "Illustration",
                description: "Creating illustrations from characters to backgrounds that match your worldview"
            },
            item2: {
                title: "Design",
                description: "All design needs for branding including logos, business cards, and flyers"
            },
            item3: {
                title: "Web Development",
                description: "From LP and website creation to operation. Websites that lead to customer acquisition"
            },
            item4: {
                title: "Merchandise",
                description: "Planning and production of original goods from acrylic keychains to T-shirts"
            }
        },
        
        // Works section
        works: {
            title: "WORKS",
            subtitle: "Portfolio",
            viewMore: "View More"
        },
        
        // Contact section  
        contact: {
            title: "CONTACT",
            subtitle: "Get in Touch",
            description: "Feel free to contact us for production requests and consultations",
            form: {
                name: "Name",
                email: "Email Address",
                subject: "Subject",
                message: "Message",
                submit: "Send Message"
            }
        },
        
        // Footer
        footer: {
            copyright: "© 2025 yamatoneriko All Rights Reserved.",
            links: {
                about: "About Us",
                terms: "Terms of Service",
                privacy: "Privacy Policy",
                law: "Legal Notice"
            }
        }
    },
    
    zh: {
        // Header
        logo: "yamatoneriko",
        nav: {
            about: "關於我們",
            service: "服務項目",
            works: "作品集",
            contact: "聯絡我們"
        },
        
        // Hero section
        hero: {
            tagline: "將您的世界觀完整呈現",
            subtitle: "傳達您想表達的心意的設計",
            description: "從插畫到網站、周邊商品的一站式製作",
            cta: "立即諮詢"
        },
        
        // Problems section
        problems: {
            title: "您有這些困擾嗎？",
            subtitle: "讓我們一起解決您的創意挑戰"
        },
        
        // Features section (Why choose yamatoneriko)
        features: {
            title: "選擇yamatoneriko的理由",
            subtitle: "結合創造力與策略的全方位創意支援",
            item1: {
                title: "插畫製作",
                description: "從角色到背景，製作符合世界觀的插畫"
            },
            item2: {
                title: "設計製作",
                description: "標誌、名片、傳單等品牌所需的整體設計"
            },
            item3: {
                title: "網站製作", 
                description: "從登陸頁、官網製作到營運。打造能吸引客戶的網站"
            },
            item4: {
                title: "周邊商品製作",
                description: "從壓克力吊飾到T恤，原創商品的企劃與製作"
            }
        },
        
        // Works section
        works: {
            title: "作品集",
            subtitle: "製作實績",
            viewMore: "查看更多"
        },
        
        // Contact section
        contact: {
            title: "聯絡我們",
            subtitle: "諮詢表單",
            description: "歡迎隨時諮詢製作委託事宜",
            form: {
                name: "姓名",
                email: "電子郵件",
                subject: "主旨",
                message: "諮詢內容",
                submit: "送出"
            }
        },
        
        // Footer
        footer: {
            copyright: "© 2025 yamatoneriko 版權所有",
            links: {
                about: "營運者資訊",
                terms: "使用條款",
                privacy: "隱私權政策",
                law: "特定商業交易法相關標示"
            }
        }
    }
};

// Current language
let currentLang = localStorage.getItem('language') || 'ja';

// Initialize language on page load
document.addEventListener('DOMContentLoaded', () => {
    // Create language switcher if it doesn't exist
    if (!document.querySelector('.language-switcher')) {
        createLanguageSwitcher();
    }
    
    // Apply translations
    updateLanguage(currentLang);
});

// Create language switcher UI
function createLanguageSwitcher() {
    const switcher = document.createElement('div');
    switcher.className = 'language-switcher';
    switcher.innerHTML = `
        <button class="lang-btn ${currentLang === 'ja' ? 'active' : ''}" data-lang="ja">日本語</button>
        <button class="lang-btn ${currentLang === 'en' ? 'active' : ''}" data-lang="en">English</button>
        <button class="lang-btn ${currentLang === 'zh' ? 'active' : ''}" data-lang="zh">繁體中文</button>
    `;
    
    // Add styles
    const style = document.createElement('style');
    style.textContent = `
        .language-switcher {
            position: fixed;
            top: 100px;
            right: 20px;
            z-index: 1001;
            display: flex;
            gap: 5px;
            background: rgba(255, 255, 255, 0.9);
            padding: 5px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .lang-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            color: var(--color-gray);
            font-size: 14px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Sans JP', sans-serif;
        }
        
        .lang-btn:hover {
            background: var(--color-yellow);
            color: var(--color-dark);
        }
        
        .lang-btn.active {
            background: var(--color-yellow);
            color: var(--color-dark);
            font-weight: 500;
        }
        
        @media (max-width: 768px) {
            .language-switcher {
                top: 70px;
                right: 10px;
                padding: 3px;
            }
            
            .lang-btn {
                padding: 6px 12px;
                font-size: 12px;
            }
        }
    `;
    document.head.appendChild(style);
    
    // Add to body
    document.body.appendChild(switcher);
    
    // Add event listeners
    switcher.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const lang = e.target.dataset.lang;
            switchLanguage(lang);
        });
    });
}

// Switch language
function switchLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('language', lang);
    
    // Update active button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
    });
    
    // Update page content
    updateLanguage(lang);
}

// Update page content with translations
function updateLanguage(lang) {
    const t = translations[lang];
    
    // Update page title
    document.title = `yamatoneriko | ${t.hero.tagline}`;
    
    // Update navigation
    const navLinks = document.querySelectorAll('.nav-links li a');
    if (navLinks.length >= 3) {
        navLinks[0].textContent = t.nav.about;
        navLinks[1].textContent = 'Portfolio';  // Keep Portfolio in English
        navLinks[2].textContent = 'Flow';  // Keep Flow in English
        // Last button is the CTA button, update its content
        if (navLinks[3]) {
            navLinks[3].innerHTML = t.hero.cta + ' <i class="fas fa-arrow-right"></i>';
        }
    }
    
    // Update hero section
    const heroH1 = document.querySelector('.hero-text h1');
    if (heroH1) {
        // Split tagline for proper formatting
        const taglineParts = t.hero.tagline.split('、');
        if (lang === 'ja') {
            heroH1.innerHTML = `あなたの<span class="highlight">世界観</span>、<br>まるごとカタチにします。`;
        } else if (lang === 'en') {
            heroH1.innerHTML = `Bringing Your Entire <span class="highlight">Worldview</span><br>to Life`;
        } else if (lang === 'zh') {
            heroH1.innerHTML = `將您的<span class="highlight">世界觀</span><br>完整呈現`;
        }
    }
    
    const heroP = document.querySelector('.hero-text p');
    if (heroP) {
        if (lang === 'ja') {
            heroP.innerHTML = `イラスト・Web・グッズまで、一貫制作でブランド力アップ。<br>企画段階からご相談OK。"届けたい想い"が伝わるデザインを。`;
        } else {
            heroP.innerHTML = t.hero.description + '<br>' + t.hero.subtitle;
        }
    }
    
    const heroCta = document.querySelector('.hero-buttons .cta-button');
    if (heroCta) {
        heroCta.innerHTML = `<i class="fas fa-sparkles"></i> ${t.hero.cta}`;
    }
    
    // Update problems section
    const problemsTitle = document.querySelector('.problems .section-title h2');
    if (problemsTitle) problemsTitle.textContent = t.problems.title;
    
    const problemsSubtitle = document.querySelector('.problems .section-subtitle');
    if (problemsSubtitle) problemsSubtitle.textContent = t.problems.subtitle;
    
    // Update features section (Why choose yamatoneriko)
    const featuresTitle = document.querySelector('.features .section-title h2');
    if (featuresTitle) featuresTitle.textContent = t.features.title;
    
    const featuresSubtitle = document.querySelector('.features .section-subtitle');
    if (featuresSubtitle) featuresSubtitle.textContent = t.features.subtitle;
    
    const featureItems = document.querySelectorAll('.feature-card');
    if (featureItems.length >= 4) {
        featureItems[0].querySelector('h3').textContent = t.features.item1.title;
        featureItems[0].querySelector('p').textContent = t.features.item1.description;
        
        featureItems[1].querySelector('h3').textContent = t.features.item2.title;
        featureItems[1].querySelector('p').textContent = t.features.item2.description;
        
        featureItems[2].querySelector('h3').textContent = t.features.item3.title;
        featureItems[2].querySelector('p').textContent = t.features.item3.description;
        
        featureItems[3].querySelector('h3').textContent = t.features.item4.title;
        featureItems[3].querySelector('p').textContent = t.features.item4.description;
    }
    
    // Update works section
    const worksTitle = document.querySelector('.portfolio .section-title h2');
    if (worksTitle) worksTitle.textContent = t.works.title;
    
    const worksSubtitle = document.querySelector('.portfolio .section-subtitle');
    if (worksSubtitle) worksSubtitle.textContent = t.works.subtitle;
    
    // No view more button in current HTML
    
    // Update contact section (CTA section)
    const ctaTitle = document.querySelector('.cta-section h2');
    if (ctaTitle) {
        if (lang === 'ja') {
            ctaTitle.textContent = 'あなたの想いを、カタチにしませんか？';
        } else if (lang === 'en') {
            ctaTitle.textContent = 'Ready to Bring Your Ideas to Life?';
        } else if (lang === 'zh') {
            ctaTitle.textContent = '準備好將您的想法實現了嗎？';
        }
    }
    
    const ctaP = document.querySelector('.cta-section p');
    if (ctaP) ctaP.textContent = t.contact.description;
    
    // Update form placeholders
    const nameInput = document.querySelector('input[name="name"]');
    if (nameInput) nameInput.placeholder = t.contact.form.name;
    
    const emailInput = document.querySelector('input[name="email"]');
    if (emailInput) emailInput.placeholder = t.contact.form.email;
    
    const subjectInput = document.querySelector('input[name="subject"]');
    if (subjectInput) subjectInput.placeholder = t.contact.form.subject;
    
    const messageInput = document.querySelector('textarea[name="message"]');
    if (messageInput) messageInput.placeholder = t.contact.form.message;
    
    const submitBtn = document.querySelector('.submit-btn');
    if (submitBtn) submitBtn.textContent = t.contact.form.submit;
    
    // Update footer
    const copyright = document.querySelector('.footer-bottom p');
    if (copyright) copyright.textContent = t.footer.copyright;
    
    // Update footer links - they are in the second footer-links div
    const footerLinksDivs = document.querySelectorAll('.footer-links');
    if (footerLinksDivs.length >= 2) {
        const links = footerLinksDivs[1].querySelectorAll('a');
        if (links.length >= 4) {
            links[0].textContent = t.footer.links.about;
            links[1].textContent = t.footer.links.terms;
            links[2].textContent = t.footer.links.privacy;
            links[3].textContent = t.footer.links.law;
        }
    }
    
    // Update HTML lang attribute
    document.documentElement.lang = lang === 'zh' ? 'zh-TW' : lang;
    
    // Debug logging
    console.log('Language changed to:', lang);
}